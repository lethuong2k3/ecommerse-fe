import{j as t,L as D,Q as b,h as p,i as N,r as _,S as g,k as v,d as C,B as j,l as P,m as B,n as E,o as H,p as I,q as M,H as k,M as L,e as F}from"./index-Bu6A_TgO.js";import{P as G}from"./PaymentMethods-CDKpSRCL.js";import{C as Q,E as R}from"./confirmdialog.esm-CpI6dCZ6.js";import{I as q}from"./index-DIYJYOMg.js";import{S as z}from"./Steps-Kao4qpzG.js";import"./CSSTransition-BQiF7i5T.js";const w="_container_a9npa_2",X="_resPhoneTablet_a9npa_2",U="_containerContents_a9npa_7",A="_containerCart_a9npa_13",K="_cartTable_a9npa_16",O="_qty_a9npa_48",V="_priceQty_a9npa_59",W="_productName_a9npa_62",J="_subtotal_a9npa_65",Y="_remove_a9npa_68",Z="_containerRight_a9npa_142",$="_containerSummary_a9npa_146",tt="_title_a9npa_151",at="_boxTotal_a9npa_157",et="_boxBtn_a9npa_164",st="_subTotal_a9npa_174",nt="_price_a9npa_59",ot="_totals_a9npa_182",rt="_boxFooter_a9npa_186",ct="_boxCoupon_a9npa_193",it="_boxBtnDelete_a9npa_213",lt="_boxEmptyCart_a9npa_258",dt="_titleEmpty_a9npa_268",xt="_boxBtnEmpty_a9npa_272",pt="_loadingCart_a9npa_277",e={container:w,resPhoneTablet:X,containerContents:U,containerCart:A,cartTable:K,qty:O,priceQty:V,productName:W,subtotal:J,remove:Y,containerRight:Z,containerSummary:$,title:tt,boxTotal:at,boxBtn:et,subTotal:st,price:nt,totals:ot,boxFooter:rt,boxCoupon:ct,boxBtnDelete:it,boxEmptyCart:lt,titleEmpty:dt,boxBtnEmpty:xt,loadingCart:pt};function y(){return t.jsx("div",{className:e.loadingCart,children:t.jsx(D,{})})}const ht=({listProductCart:n,getData:o,isLoading:l,getDataDelete:s})=>{const d=(a,i,u)=>{i<u.productDetail.amount&&o(a,{quantity:+i+1})},r=(a,i)=>{i<=1||o(a,{quantity:+i-1})},c=a=>{s(a)};return t.jsxs("div",{className:e.cartTable,children:[t.jsxs("table",{children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"SẢN PHẨM"}),t.jsx("th",{}),t.jsx("th",{children:"GIÁ"}),t.jsx("th",{children:"SKU"}),t.jsx("th",{children:"SỐ LƯỢNG"}),t.jsx("th",{children:"TẠM TÍNH"})]})}),t.jsx("tbody",{children:n.map(a=>t.jsxs("tr",{children:[t.jsxs("td",{className:e.product,children:[t.jsx("img",{src:a.productDetail.product.images[0].url,alt:a.productDetail.product.images[0].filename}),t.jsxs("div",{className:e.productDetail,children:[t.jsx("p",{className:e.productName,children:a.productDetail.product.name}),t.jsxs("p",{className:e.attribute,children:[a.productDetail.color.name,","," ",a.productDetail.size.name]}),t.jsxs("p",{className:e.priceQty,children:[t.jsx("span",{children:t.jsx(b,{decrement:r,increment:d,item:a})}),"X",t.jsx("span",{children:p(a.itemPrice)})]}),t.jsxs("p",{className:e.subtotal,children:["Tạm tính: ",p(a.totalPrice)]}),t.jsx("p",{className:e.remove,onClick:()=>c(a.id),children:"Xóa"})]})]}),t.jsx("td",{children:t.jsx("div",{onClick:()=>c(a.id),style:{fontSize:"16px",cursor:"pointer"},children:t.jsx(N,{})})}),t.jsx("td",{children:p(a.itemPrice)}),t.jsx("td",{children:a.productDetail.product.sku}),t.jsx("td",{className:e.qty,children:t.jsx(b,{decrement:r,increment:d,item:a})}),t.jsx("td",{children:p(a.totalPrice)})]},a.id))})]}),l&&t.jsx(y,{})]})},mt=()=>{const{listProductCart:n,isLoading:o}=_.useContext(g),l=v(),s=()=>{l("/shop")},d=()=>{l("/thanh-toan")},r=n.reduce((c,a)=>c+a.totalPrice,0);return t.jsxs("div",{className:e.containerRight,children:[t.jsxs("div",{className:e.containerSummary,children:[t.jsx("div",{className:e.title,children:"TÓM TẮT ĐƠN HÀNG"}),t.jsxs("div",{className:C(e.boxTotal,e.subTotal),children:[t.jsx("div",{children:"Tạm tính"}),t.jsx("div",{className:e.price,children:p(r)})]}),t.jsxs("div",{className:C(e.boxTotal,e.totals),children:[t.jsx("div",{children:"Tổng tiền"}),t.jsx("div",{children:p(r)})]}),t.jsxs("div",{className:e.boxBtn,children:[t.jsx(j,{content:"TIẾN HÀNH ĐẶT HÀNG",onClick:d}),t.jsx(j,{content:"MUA THÊM SẢN PHẨM",onClick:s,isPrimary:!1})]}),o&&t.jsx(y,{})]}),t.jsx(G,{})]})};function _t(){const{listProductCart:n,handleGetListProductsCart:o,isLoading:l,setIsLoading:s}=_.useContext(g),{toast:d}=_.useContext(P),[r,c]=_.useState(!1),a=B.get("id"),i=v(),u=(x,h)=>{s(!0),H(x,h).then(m=>{if(m.data.errors){d.error(m.data.errors[401]),s(!1);return}o(a,"cart"),s(!1)}).catch(m=>{s(!1),console.log(m)})},T=x=>{s(!0),I(x).then(h=>{o(a,"cart")}).catch(h=>{s(!1),console.log(h)})},f=()=>{s(!0),M().then(x=>{o(a),s(!1)}).catch(x=>{s(!1),console.log(x)})},S=()=>{i("/shop")};return t.jsx(t.Fragment,{children:(n==null?void 0:n.length)>0&&a?t.jsxs("div",{className:e.containerContents,children:[t.jsxs("div",{className:e.containerCart,children:[t.jsx(ht,{listProductCart:n,getData:u,getDataDelete:T,isLoading:l}),t.jsx("div",{className:e.boxFooter,children:t.jsxs("div",{className:e.boxBtnDelete,children:[t.jsx(Q,{group:"declarative",visible:r,onHide:()=>c(!1),message:"Bạn có chắc muốn xóa giỏ hàng?",header:"Xác nhận",style:{width:"50vw"},breakpoints:{"1100px":"75vw","960px":"100vw"},icon:t.jsx(q,{size:30}),accept:f}),t.jsx(j,{content:t.jsxs("div",{children:[t.jsx(N,{size:14})," Xóa tất cả"]}),isPrimary:!1,onClick:()=>c(!0)})]})})]}),t.jsx(mt,{})]}):t.jsx(R,{icon:t.jsx(E,{size:40}),title:"GIỎ HÀNG",handleNavigateToShop:S})})}function vt(){return t.jsxs(t.Fragment,{children:[t.jsx(k,{}),t.jsxs("div",{className:e.container,children:[t.jsx(z,{className:e.resPhoneTablet,step:1}),t.jsx(L,{children:t.jsx(_t,{})})]}),t.jsx(F,{})]})}export{vt as default};
